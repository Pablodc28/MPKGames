
<script src="/javascripts/carritoHeader.js"></script>
<script src="/javascripts/guardarAvatar.js"></script>

<header class="container-fluid"> <!--caja contenedora de boostrap-->
  
  <!--caja que contiene el logotipo, el buscador y botón con un link-->
  <div class="row rowTitulologo">
      <!--caja que contiene el logotipo-->
      <div class="col-2 col-md-1 col-lg-1 logo">
          <a href="/"><img src="/images/logo.png" alt="Logo MPKGames "></a>
      </div> 
      <div class="contenedorTiuloPag col-10 col-md-5 col-lg-4"><h1 class="h1TituloPagina">MPKGames</h1></div> 
             
      <!--caja que contiene el buscador de juegos -->
      <div class="contBuscadorMd col-md-5 col-lg-4">                
          <form action="/productos/search" method="get" class="search-form">
              <input type="text" name="search" placeholder="Buscar tu Juego favorito" class="search-form_input">
              <button type="submit" class="search-form_button"><i class="fas fa-search"></i></button>
          </form>
      </div>
   
        <!--caja que contiene el link-->
        <div class="cabezalAvatar col-12 col-md-1 col-lg-3 justify-content-end align-items-center">
          
          <% if (typeof user != "undefined" && user.rol=="user") { %>
            
              <a href=""><h5 class="nombreApelluser"><%= (typeof user != "undefined" && user)?user.nick:"Invitado" %> </h5></a>            
                    <!-- si es un usuario registrado entonces que puede ser administrador o usuario-->
                    <div class="dropdown"  width="50px" height="50px">
                      <button class="" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    
                    <a href=""><img id="AvatarImg" src="/images/Avatares/<%= user.avatar %> " alt="avatar" width="50px" height="50px" class="avatar"></a>                                               
                  </button>
                  <div class="dropdown-menu" aria-labelledby="">
                        <a class="dropdown-item" href="/users/show/<%= user.id %>">Mi perfil</a>
                        <a class="dropdown-item" href="/users/logout">Cerrar sesión</a>

                    </div>

                </div>
              <% }else if (typeof user != "undefined" && user.rol=="Administrador") { %>
            
                    <a href=""><h5 class="nombreApelluser"><%= (typeof user != "undefined" && user)?user.nick:"Invitado" %> </h5></a>            
                        <!-- si es un usuario registrado entonces que puede ser administrador o usuario-->
                    <div class="dropdown"  width="50px" height="50px">
                          <button class="" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        
                        <a href=""><img src="/images/Avatares/<%= user.avatar %> " alt="avatar" width="50px" height="50px" class="avatar"></a>                                               
                      </button>
                      <div class="dropdown-menu" aria-labelledby="">
                            <a class="dropdown-item" href="/users/show/<%= user.id %>">Mi perfil</a>
                            <a class="dropdown-item" href="/productos/add/form">Agregar Juego</a>
                            <a class="dropdown-item" href="/api/all/">ApiProductos</a>
                            <a class="dropdown-item" href="/noticias/add/fromNoticias">Agregar noticias</a>
                            <a class="dropdown-item" href="/users/logout">Cerrar sesión</a>
                      </div>
    
                    </div>
              
              <% } else{%>            
                <!-- Si es invitado --> 

                <a href=""> <h5 class="nombreApelluser">Invitado</h5></a>
                <div class="dropdown avatar"  width="50px" height="50px">
                  <button class="" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                
                    <a href="/"><img src="/images/Avatares/default.png " alt="avatar" width="50px" height="50px" class="avatar"></a>  
              </button>
            </div>
              <% } %>

      </div>
      
      <!--finaliza el div.row-->
  </div>
  
  <!--barra de navegación-->
  <div class="row rowBtnBarraIcon">
          <div class="contenedorColumNav col-2 col-md-12 col-lg-12">
            <nav class="navbar navbar-expand-md navbar-light bg-light">
  
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>

              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="menu navbar-nav mr-auto">
                      <ul class="navbar-nav">
                        <li class="nav-item ">
                          <a class="nav-link" href="/">Home<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-house-door" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M7.646 1.146a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5H9.5a.5.5 0 0 1-.5-.5v-4H7v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6zM2.5 7.707V14H6v-4a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4h3.5V7.707L8 2.207l-5.5 5.5z"/>
                            <path fill-rule="evenodd" d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
                          </svg></a>
                        </li> 
                      </ul>
                      <!-- si no esta logeado ningun usuario entonces... -->
                    <% if (typeof user == "undefined") { %>    
                        <ul class="navbar-nav">
                          <li class="nav-item">
                            <a class="nav-link" href="/users/login">Ingresá <i class="fas fa-sign-in-alt "></i></a>
                          </li>                  
                          <li class="nav-item ">
                            <a class="nav-link" href="/users/registroUsuarios">Creá tu cuenta <i class="far fa-address-card "></i></span></a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="/noticias/noticiasMenuShow">Noticias 
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-newspaper" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"/>
                              <path d="M2 3h10v2H2V3zm0 3h4v3H2V6zm0 4h4v1H2v-1zm0 2h4v1H2v-1zm5-6h2v1H7V6zm3 0h2v1h-2V6zM7 8h2v1H7V8zm3 0h2v1h-2V8zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1z"/>
                            </svg>
                          </a>
                          </li> 
                        </ul>
             
                          <!-- si NO, si ingreso con un usuario tipo user entonces -->
                        <% } else{ %>
                          <ul class="menu navbar-nav">
                            <li class="nav-item">
                              <a class="nav-link" href="/carritos/enCarritoCompras">Mis compras<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-cart carritoCant" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                              </svg><i id="TotalesDelCarrito" class="badge badge-primary"></i></a>

                            </li>  
                            <% if(user.rol!="Administrador"){ %> 
                              <li  class="nav-item">
                                <a class="nav-link" href="/productos/listproductos">Lista Productos</a>
                              </li>
                            <% }  %> 
                                <!-- O si si ingreso con un usuario PERO TIPO ADMINSTRADOR entonces -->
                                <% if(user.rol=="Administrador"){ %> 
                                    <ul class="navbar-nav">
                                    
                                        <li class="nav-item">
                                          <a class="nav-link" href="/productos/">Productos Edicion</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" href="/productos/add/form">Carga de producto</a>
                                        </li>    
                                       <!--  <li class="nav-item">-->
                                        <!--   <a class="nav-link" href="/api/all/">Ver Api de Productos</a>-->
                                      <!--   </li>  -->
                                    </ul>                                  
                                <% }  %>       
                                
                                  <li class="nav-item">
                                    <a class="nav-link" href="/noticias/noticiasMenuShow">Noticias 
                                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-newspaper" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                      <path fill-rule="evenodd" d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"/>
                                      <path d="M2 3h10v2H2V3zm0 3h4v3H2V6zm0 4h4v1H2v-1zm0 2h4v1H2v-1zm5-6h2v1H7V6zm3 0h2v1h-2V6zM7 8h2v1H7V8zm3 0h2v1h-2V8zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1z"/>
                                    </svg>
                                  </a>
                                  </li> 
                                
                        </ul>                                                               
                        <% } %>                                     
              </div>
              
            </nav>
          </div>

      
      <!--finaliza caja contenedora del menu-->

            <div class="contBuscador col-10 ">                
                <form action="/productos/search" method="get" class="search-form">
                    <input type="text" name="search" placeholder="Buscar tu Juego favorito" class="search-form_input">
                    <button type="submit" class="search-form_button"><i class="fas fa-search"></i></button>
                </form>
            </div>
    </div>

<!--finaliza caja contenedora bootstrap-->
</header>